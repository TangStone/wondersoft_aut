{"uid":"718cc5581b4a9926","name":"删除同步配置及数据源配置","fullName":"test_cases.step_defs.bms.test_01_user_sync#test_删除同步配置及数据源配置","historyId":"8b6d56f58bfe777e1b2b8f17487fa065","time":{"start":1719193091818,"stop":1719193126642,"duration":34824},"description":"E:\\Wondersoft_AutoTest\\test_cases\\features\\bms\\user_sync.feature: 删除同步配置及数据源配置","descriptionHtml":"<p>E:\\Wondersoft_AutoTest\\test_cases\\features\\bms\\user_sync.feature: 删除同步配置及数据源配置</p>\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Timeout 30000ms exceeded.","statusTrace":"fixturefunc = <function step_remove_datasource at 0x00000179E2339040>\nrequest = <FixtureRequest for <Function test_删除同步配置及数据源配置[AD\\u57df\\u540c\\u6b65-70.235]>>\nkwargs = {'datasource_name': 'AD域同步', 'page': <Page url='https://192.168.148.174:31000/sub-app-unity/userSync'>}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n.venv\\lib\\site-packages\\_pytest\\fixtures.py:908: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ntest_cases\\step_defs\\bms\\test_01_user_sync.py:78: in step_remove_datasource\n    UseSyncPage(page).delete_datasource(datasource_name)\npages\\bms\\user_sync_page.py:63: in delete_datasource\n    ExceptionHandle().handle_exception(e)\npages\\bms\\user_sync_page.py:58: in delete_datasource\n    self.button_operate_with_line(datasource_name, \"删除\")  # 点击操作模块的【删除】按钮\nutils\\ui_utils\\base_page.py:660: in button_operate_with_line\n    location.locator(\n.venv\\lib\\site-packages\\playwright\\sync_api\\_generated.py:14764: in click\n    self._sync(\n.venv\\lib\\site-packages\\playwright\\_impl\\_locator.py:153: in click\n    return await self._frame.click(self._selector, strict=True, **params)\n.venv\\lib\\site-packages\\playwright\\_impl\\_frame.py:488: in click\n    await self._channel.send(\"click\", locals_to_params(locals()))\n.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py:59: in send\n    return await self._connection.wrap_api_call(\n.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py:509: in wrap_api_call\n    return await cb()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Channel object at 0x00000179E24F9F70>\nmethod = 'click'\nparams = {'selector': '//div[@class=\"el-table__fixed-right\"]//span[normalize-space(text())=\"AD域同步\"]/../../..//button[@title=\"删除\"]', 'strict': True}\nreturn_as_dict = False\n\n    async def inner_send(\n        self, method: str, params: Optional[Dict], return_as_dict: bool\n    ) -> Any:\n        if params is None:\n            params = {}\n        if self._connection._error:\n            error = self._connection._error\n            self._connection._error = None\n            raise error\n        callback = self._connection._send_message_to_server(\n            self._object, method, _filter_none(params)\n        )\n        done, _ = await asyncio.wait(\n            {\n                self._connection._transport.on_error_future,\n                callback.future,\n            },\n            return_when=asyncio.FIRST_COMPLETED,\n        )\n        if not callback.future.done():\n            callback.future.cancel()\n>       result = next(iter(done)).result()\nE       playwright._impl._errors.TimeoutError: Timeout 30000ms exceeded.\n\n.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py:97: TimeoutError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1719192979765,"stop":1719192979844,"duration":79},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"delete_output_dir","time":{"start":1719192979844,"stop":1719192979844,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"base_url","time":{"start":1719192979844,"stop":1719192979844,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"_verify_url","time":{"start":1719192979844,"stop":1719192979844,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"pytestconfig","time":{"start":1719192979844,"stop":1719192979844,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"login_init","time":{"start":1719192979844,"stop":1719192980270,"duration":426},"status":"passed","steps":[{"name":"发送请求","time":{"start":1719192979933,"stop":1719192980266,"duration":333},"status":"passed","steps":[],"attachments":[{"uid":"685973042997226b","name":"请求方法：","source":"685973042997226b.attach","type":"text/plain","size":4},{"uid":"4028c8e374652ee4","name":"请求地址","source":"4028c8e374652ee4.attach","type":"text/plain","size":52},{"uid":"77d789ead5ad488b","name":"请求头","source":"77d789ead5ad488b.attach","type":"text/plain","size":109},{"uid":"7bbe94c7867f0c69","name":"请求参数","source":"7bbe94c7867f0c69.attach","type":"text/plain","size":225},{"uid":"c4fb8813a3a3ebc1","name":"请求结果","source":"c4fb8813a3a3ebc1.attach","type":"text/plain","size":2611}],"parameters":[],"attachmentsCount":5,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":0},{"name":"结果校验","time":{"start":1719192980266,"stop":1719192980269,"duration":3},"status":"passed","steps":[{"name":"状态码校验","time":{"start":1719192980266,"stop":1719192980267,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"b61287c03722b031","name":"期望状态码","source":"b61287c03722b031.attach","type":"text/plain","size":3},{"uid":"31fb80d09b8321da","name":"实际状态码","source":"31fb80d09b8321da.attach","type":"text/plain","size":3}],"parameters":[],"attachmentsCount":2,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":0},{"name":"返回值校验","time":{"start":1719192980267,"stop":1719192980269,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"c5801df9ce93e038","name":"期望返回值","source":"c5801df9ce93e038.attach","type":"text/plain","size":66},{"uid":"9b9bcdb84b798821","name":"实际返回值","source":"9b9bcdb84b798821.attach","type":"text/plain","size":2611}],"parameters":[],"attachmentsCount":2,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[],"attachmentsCount":4,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":2}],"attachments":[],"parameters":[],"attachmentsCount":9,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":4},{"name":"playwright","time":{"start":1719192980900,"stop":1719192984538,"duration":3638},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"browser_type_launch_args","time":{"start":1719192984539,"stop":1719192984539,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"device","time":{"start":1719192984539,"stop":1719192984539,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"browser_name","time":{"start":1719192984539,"stop":1719192984539,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"browser_context_args","time":{"start":1719192984539,"stop":1719192984539,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"browser_type","time":{"start":1719192984539,"stop":1719192984539,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"browser_type_launch_args","time":{"start":1719192984539,"stop":1719192984539,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"context","time":{"start":1719192984539,"stop":1719192987752,"duration":3213},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"browser_context_args","time":{"start":1719192984539,"stop":1719192984539,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"page","time":{"start":1719192987752,"stop":1719192988822,"duration":1070},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"host","time":{"start":1719192988822,"stop":1719192988822,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0}],"testStage":{"description":"E:\\Wondersoft_AutoTest\\test_cases\\features\\bms\\user_sync.feature: 删除同步配置及数据源配置","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Timeout 30000ms exceeded.","statusTrace":"fixturefunc = <function step_remove_datasource at 0x00000179E2339040>\nrequest = <FixtureRequest for <Function test_删除同步配置及数据源配置[AD\\u57df\\u540c\\u6b65-70.235]>>\nkwargs = {'datasource_name': 'AD域同步', 'page': <Page url='https://192.168.148.174:31000/sub-app-unity/userSync'>}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n.venv\\lib\\site-packages\\_pytest\\fixtures.py:908: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ntest_cases\\step_defs\\bms\\test_01_user_sync.py:78: in step_remove_datasource\n    UseSyncPage(page).delete_datasource(datasource_name)\npages\\bms\\user_sync_page.py:63: in delete_datasource\n    ExceptionHandle().handle_exception(e)\npages\\bms\\user_sync_page.py:58: in delete_datasource\n    self.button_operate_with_line(datasource_name, \"删除\")  # 点击操作模块的【删除】按钮\nutils\\ui_utils\\base_page.py:660: in button_operate_with_line\n    location.locator(\n.venv\\lib\\site-packages\\playwright\\sync_api\\_generated.py:14764: in click\n    self._sync(\n.venv\\lib\\site-packages\\playwright\\_impl\\_locator.py:153: in click\n    return await self._frame.click(self._selector, strict=True, **params)\n.venv\\lib\\site-packages\\playwright\\_impl\\_frame.py:488: in click\n    await self._channel.send(\"click\", locals_to_params(locals()))\n.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py:59: in send\n    return await self._connection.wrap_api_call(\n.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py:509: in wrap_api_call\n    return await cb()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Channel object at 0x00000179E24F9F70>\nmethod = 'click'\nparams = {'selector': '//div[@class=\"el-table__fixed-right\"]//span[normalize-space(text())=\"AD域同步\"]/../../..//button[@title=\"删除\"]', 'strict': True}\nreturn_as_dict = False\n\n    async def inner_send(\n        self, method: str, params: Optional[Dict], return_as_dict: bool\n    ) -> Any:\n        if params is None:\n            params = {}\n        if self._connection._error:\n            error = self._connection._error\n            self._connection._error = None\n            raise error\n        callback = self._connection._send_message_to_server(\n            self._object, method, _filter_none(params)\n        )\n        done, _ = await asyncio.wait(\n            {\n                self._connection._transport.on_error_future,\n                callback.future,\n            },\n            return_when=asyncio.FIRST_COMPLETED,\n        )\n        if not callback.future.done():\n            callback.future.cancel()\n>       result = next(iter(done)).result()\nE       playwright._impl._errors.TimeoutError: Timeout 30000ms exceeded.\n\n.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py:97: TimeoutError","steps":[{"name":"打开网站：'https://192.168.148.174:31000/'","time":{"start":1719193091820,"stop":1719193092090,"duration":270},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"url","value":"'https://192.168.148.174:31000/'"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":0},{"name":"判断是否需要重新登录","time":{"start":1719193092092,"stop":1719193094102,"duration":2010},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"full_url","value":"'https://192.168.148.174:31000/portal-login'"},{"name":"username","value":"'admin'"},{"name":"password","value":"'Ws-123456'"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":0},{"name":"点击一级菜单：'用户管理'","time":{"start":1719193094103,"stop":1719193094163,"duration":60},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"men","value":"'用户管理'"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":0},{"name":"点击二级菜单：'用户同步管理'下的三级菜单：'用户同步'","time":{"start":1719193094164,"stop":1719193095108,"duration":944},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sec_men","value":"'用户同步管理'"},{"name":"thi_men","value":"'用户同步'"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":0},{"name":"切换标签页：'同步配置'","time":{"start":1719193095109,"stop":1719193096477,"duration":1368},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"tab","value":"'同步配置'"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":0},{"name":"删除数据源配置：'AD域同步'","time":{"start":1719193096478,"stop":1719193126642,"duration":30164},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Timeout 30000ms exceeded.\n","statusTrace":"  File \"E:\\Wondersoft_AutoTest\\.venv\\lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"E:\\Wondersoft_AutoTest\\pages\\bms\\user_sync_page.py\", line 63, in delete_datasource\n    ExceptionHandle().handle_exception(e)\n  File \"E:\\Wondersoft_AutoTest\\pages\\bms\\user_sync_page.py\", line 58, in delete_datasource\n    self.button_operate_with_line(datasource_name, \"删除\")  # 点击操作模块的【删除】按钮\n  File \"E:\\Wondersoft_AutoTest\\utils\\ui_utils\\base_page.py\", line 660, in button_operate_with_line\n    location.locator(\n  File \"E:\\Wondersoft_AutoTest\\.venv\\lib\\site-packages\\playwright\\sync_api\\_generated.py\", line 14764, in click\n    self._sync(\n  File \"E:\\Wondersoft_AutoTest\\.venv\\lib\\site-packages\\playwright\\_impl\\_sync_base.py\", line 113, in _sync\n    return task.result()\n  File \"E:\\Wondersoft_AutoTest\\.venv\\lib\\site-packages\\playwright\\_impl\\_locator.py\", line 153, in click\n    return await self._frame.click(self._selector, strict=True, **params)\n  File \"E:\\Wondersoft_AutoTest\\.venv\\lib\\site-packages\\playwright\\_impl\\_frame.py\", line 488, in click\n    await self._channel.send(\"click\", locals_to_params(locals()))\n  File \"E:\\Wondersoft_AutoTest\\.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 59, in send\n    return await self._connection.wrap_api_call(\n  File \"E:\\Wondersoft_AutoTest\\.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 509, in wrap_api_call\n    return await cb()\n  File \"E:\\Wondersoft_AutoTest\\.venv\\lib\\site-packages\\playwright\\_impl\\_connection.py\", line 97, in inner_send\n    result = next(iter(done)).result()\n","steps":[{"name":"根据查询条件查询数据源配置，查询条件{'名称': 'AD域同步'}","time":{"start":1719193096479,"stop":1719193096598,"duration":119},"status":"passed","steps":[{"name":"点击按钮：'搜索'","time":{"start":1719193096544,"stop":1719193096597,"duration":53},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"button","value":"'搜索'"},{"name":"page_name","value":"None"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":0}],"attachments":[],"parameters":[{"name":"query_conditions","value":"{'名称': 'AD域同步'}"}],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"stepsCount":1}],"attachments":[{"uid":"d50657987fd7cd5b","name":"测试用例运行失败：","source":"d50657987fd7cd5b.attach","type":"text/plain","size":1545}],"parameters":[{"name":"datasource_name","value":"'AD域同步'"}],"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true,"stepsCount":2}],"attachments":[],"parameters":[],"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true,"stepsCount":8},"afterStages":[{"name":"page::0","time":{"start":1719193161870,"stop":1719193161879,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"context::0","time":{"start":1719193161880,"stop":1719193163058,"duration":1178},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"playwright::0","time":{"start":1719193163063,"stop":1719193163078,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0}],"labels":[{"name":"feature","value":"用户同步模块"},{"name":"tag","value":"@pytest.mark.usefixtures"},{"name":"parentSuite","value":"test_cases.step_defs.bms"},{"name":"suite","value":"test_01_user_sync"},{"name":"host","value":"DESKTOP-ATHT3TO"},{"name":"thread","value":"11544-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test_cases.step_defs.bms.test_01_user_sync"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"_pytest_bdd_example","value":"{'同步配置': 'AD域同步', '数据源配置': '70.235'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["@pytest.mark.usefixtures"]},"source":"718cc5581b4a9926.json","parameterValues":["{'同步配置': 'AD域同步', '数据源配置': '70.235'}"]}